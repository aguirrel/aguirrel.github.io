#ifdef OS_Linux
#pragma pack(1)
#endif

/*
+-----------------+------------------------------------------------------------+
| FUENTE          | Status.C                                                   |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Obtjeto para el manejo de los estados de los C.A.          |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
#include "Status.h"
/*
+-----------------+------------------------------------------------------------+
| FUNCION         | CaStatus::Open                                             |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Abre la estructura                                         |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
int CaStatus::Open(long SemId, int Perm)
{
	int ret; 

	ret=Sem.Create(SemId,Perm);
	return ret;
}
/*
+-----------------+------------------------------------------------------------+
| FUNCION         | CaStatus::Status                                           |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Obtiene el estado                                          |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
int CaStatus::Status()
{
	int rc;

	Sem.Set();
	rc=status;
	Sem.Reset();
	return rc;
}
/*
+-----------------+------------------------------------------------------------+
| FUNCION         | CaStatus::SetCaDown                                        |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Baja el estado                                             |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
int CaStatus::SetCaDown()
{
	Sem.Set();
	status=NOOK;
	Sem.Reset();

	return OK;
}
/*
+-----------------+------------------------------------------------------------+
| FUNCION         | CaStatus::SetCaUp                                          |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Sube el estado                                             |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
int CaStatus::SetCaUp()
{
	Sem.Set();
	status=OK;
	Sem.Reset();

	return OK;
}
/*
+-----------------+------------------------------------------------------------+
| FUNCION         | CaStatus::Destroy                                          |
+-----------------+------------------------------------------------------------+
| DESCRIPCION     | Destruye el objeto                                         |
|                 |                                                            | 
+-----------------+------------------------------------------------------------+
*/
int CaStatus::Destroy()
{
	Sem.Close();
	Sem.Destroy();
	return OK;
}